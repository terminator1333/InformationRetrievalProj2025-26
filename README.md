```text
 __      __          ___                                          __                                                      
/\ \  __/\ \        /\_ \                                        /\ \__                                                   
\ \ \/\ \ \ \     __\//\ \     ___    ___     ___ ___      __    \ \ ,_\   ___         ___   __  __  _ __                 
 \ \ \ \ \ \ \  /'__`\\ \ \   /'___\ / __`\ /' __` __`\  /'__`\   \ \ \/  / __`\      / __`\/\ \/\ \/\`'__\               
  \ \ \_/ \_\ \/\  __/ \_\ \_/\ \__//\ \L\ \/\ \/\ \/\ \/\  __/    \ \ \_/\ \L\ \    /\ \L\ \ \ \_\ \ \ \/                
   \ `\___x___/\ \____\/\____\ \____\ \____/\ \_\ \_\ \_\ \____\    \ \__\ \____/    \ \____/\ \____/\ \_\                
    '\/__//__/  \/____/\/____/\/____/\/___/  \/_/\/_/\/_/\/____/     \/__/\/___/      \/___/  \/___/  \/_/                
                                                                                                                          
                                                                                                                          
               ______             ___           ____            __                                         ___            
              /\__  _\          /'___\         /\  _`\         /\ \__         __                          /\_ \           
              \/_/\ \/     ___ /\ \__/  ___    \ \ \L\ \     __\ \ ,_\  _ __ /\_\     __   __  __     __  \//\ \          
                 \ \ \   /' _ `\ \ ,__\/ __`\   \ \ ,  /   /'__`\ \ \/ /\`'__\/\ \  /'__`\/\ \/\ \  /'__`\  \ \ \         
                  \_\ \__/\ \/\ \ \ \_/\ \L\ \   \ \ \\ \ /\  __/\ \ \_\ \ \/ \ \ \/\  __/\ \ \_/ |/\ \L\.\_ \_\ \_       
                  /\_____\ \_\ \_\ \_\\ \____/    \ \_\ \_\ \____\\ \__\\ \_\  \ \_\ \____\\ \___/ \ \__/.\_\/\____\      
                  \/_____/\/_/\/_/\/_/ \/___/      \/_/\/ /\/____/ \/__/ \/_/   \/_/\/____/ \/__/   \/__/\/_/\/____/      
                                                                                                                          
                                                                                                                          
                        ____                                   __                                                         
                       /\  _`\               __               /\ \__                                                      
                       \ \ \L\ \_ __   ___  /\_\     __    ___\ \ ,_\                                                     
                        \ \ ,__/\`'__\/ __`\\/\ \  /'__`\ /'___\ \ \/                                                     
                         \ \ \/\ \ \//\ \L\ \\ \ \/\  __//\ \__/\ \ \_                                                    
                          \ \_\ \ \_\\ \____/_\ \ \ \____\ \____\\ \__\                                                   
                           \/_/  \/_/ \/___//\ \_\ \/____/\/____/ \/__/                                                   
                                            \ \____/                                                                      
                                             \/___/ 

                                                                                                                                                           
                           `.---...__                              
                          /```.__    ``.                                        - 
                          |```/  `'--.._`.                           -^-       -      -
                          |``|        (o).)                                
                          \`` \    _,-'   `.                                   -^-
                           \```\  ( ( ` .   `.                 ~^~        -^-
                            `.```. `.` . `    `.                   
                              `.``\  `.__   `.  `.                ~^~     ~^~                                      _,,_..
                             ___\``), )\ `-.  `.  `.                                                          _,,--''  '':'::!...
                   __    _,-'   \,'  /  \   `-.  `. `.          ~^~                                       _,-' ...::::::' ' ' '::::.
                ,-' '`,-'  '  ''| '   ' |      `-. `. `.                                               _.' .':'''..'... . '::' ':::::.
             ,-''_,-' '  ' '  ' |   '  '|         `-. `.`.                               .,...____,,.-'  ..''  .:.'' ...':''.:'''':::::
          ,-'_,-'   '   '  ''   | '  '  |            `-.`.`.                          ,.:::'''''.        ' ..'' ...'' ':..''.''.   '::::
       ,-',-'  ''  ,'   |   |   |'   ' /                `-..`.                       .:::''''  ''   ':  .''....:.....':'':''.''.  ''::::.
     ,' ,'  ' '     |  ,' | ,' /    ' '|                   `-.)                      '''          ... .  ''''.''''''...:'.'. '..'. . ::::
    // /  '   |    ,'    ,'   /   '  '/                                              :  O          .. '.    ..'...    ''. '.'.  : '::.:::
    | || ,'  ,' |    ,' |   ,'   '   '|                                              :'           . '.. ''.. :..  ''.   .'..'.: ' ..;::::
    ||||   |   ,' ,'   ,' ,' ' '     /                                               :" __,..---- .:i  '    '.'.''...:'. ''.:.:'  :::: :
    |  | |,'  '     |'  ,'  '   '  '/                                              .:'.-'            `.... .. '.''.  '''':. : ::  :';::'
    | ||,'   ,' |  ,' ,' '    \   '/                                             .:'.:'                '::::::..:':::..:. '. ': ::':;.'
    ||||  |  , ,'  ,-'  /  ' '| ','                                             ::.''                    '':::::::''''.:'::.. ...::::;
    | /  ,' '   ,-' '   |'    |,'                                             .::'                           '''''::::'''''::.::'::::
    | | ' ,' ,-' '  ' ' |    '|                                             .::'                                            :::'...:
    |||,' ,-'  '  '   '_|'  '/                                             ::'                                             ;::  .:;
    |,|,-' /'___,..--''  \ ' |                                            :'                                              ,::' ,:.:
    / // ,'-' |' |        \  |                                          .:'                                          '':::::: .:::
   ///,-'      \ |         \'|                                        .:'                                         ..:''''.'  .:::
  '--'          \'\        | |                                       :'                                                 ''':::::'
              __ ) \___  __| |_                                     :'                                                ..''' .'
____,...----''   ||`-- <_.--._ -`--. __                            '                                                     .''                                                             '
                 ''            `-`     `'''''''-----......_____    

```
This is our project for the Information Retrieval course, where we built a running search engine both in colab and in GCP via a VM.

The search engine is viable for the entire English Wikipedia corpus up to Aug 2021




A bit on the given files in this repo: 


- GCP/
  - instal_gcs.sh -> when creating the Inverted Indexes for the Title, Body, and Anchor we needed the worker nodes to be updated to the required google-cloud-storage version. We added this script to GCP when initialising the cluster
  - inverted_index_gcp.py -> helper script, has the Inverted Index class used when creating the Inverted Index and in the VM
  - gcp_create_inverted_indexes.ipynb -> script for creating the Inverted Indexes for the Title, Body, and Anchor, in addition to creating the Pagerank and doc-title mappings. Was run on a cluster in GCP
  - create_pageviews.ipynb -> script for creating pageviews data in the bucket. Ran on Google Colab
  - create_doc_length_data.ipynb -> script for creating a doc length pickle for calculating cosine similarity. Ran on Colab
  - run_frontend_in_gcp.sh -> script for initiating VM
  - startup_script_gcp.sh -> script for helping run_frontend_in_gcp initiate VM
  - run_server.sh -> Since all the libraries are stored in virtual environment, this is a script to initialise the venv activation automatically using bashrc
  - optimize_weights.py -> Doing a grid search to find best hyperparams. Using 20/30 of given queries
  - run_testing_gcp.py -> Script for testing all given queries
  - get_requirements_metrics_test.py -> script for calculating MAP@5, MAP@10, AVG F1@30, as part of project requirements
  - search_frontend_for_test_cos.py -> script for a different frontend, in order to switch to using Cosine Similarity instead of BM25 for the body index, in the search function
- Colab/
  - run_frontend_in_colab.ipynb -> script for making sure the server works and testing different approaches
  - check_POST_pageview_pagerank.ipynb -> script for checking get_pagerank, get_pageview
- queries_train.json -> given queries to train. We mostly used a 20/10 split (20 for calibrating hyperparameters and 10 for testing)
- search_backend.py -> main functionality of the project. Implements the different search functions
- search_frontend.py -> frontend allowing communication between flask app and backend
- presentation_github.pdf -> presentation for showing the project + steps


How are the indexes created: 
- In the search frontend script, we create an instance of the backend class. This downloads all the files to the local machine, with the efforts of saving search time. This is done using the client feature in google-cloud-console


How to use (from scratch): 
- Create the inverted indexes, pagerank, pageviews and document lengths data
  - For Colab:
    - Upload search_backend.py, search_frontend.py, queries_train.py, run_frontend_in_colab.ipynb
    - Run run_frontent_in_colab.ipynb
  - For GCP:
    - Initialise VM using run_frontend_in_gcp, startup_script_gcp.sh, run_server.sh
    - Upload search_backend.py, search_frontend.py, queries_train.py, run_testing_gcp.py
    - Run search_frontend.py (downloads the files locally)
    - Run run_testing_gcp.py
    - FOR SPECIFIC QUERIES PLEASE NAVIGATE TO http://localhost:8080/search?query=your+query (remove 'your+query' with the actual queries, but replace spaces with pluses('+')


How to use the VM:
- Upload search_backend.py, search_frontend.py, queries_train.py, run_testing_gcp.py
- Run search_frontend.py
- Run run_testing_gcp.py


<img width="2816" height="1536" alt="Gemini_Generated_Image_9fzh2i9fzh2i9fzh" src="https://github.com/user-attachments/assets/06d415ee-504b-41b0-b83b-935a80854a03" />
